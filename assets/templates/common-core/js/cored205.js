function init_bh_slider(){function n(){return window.innerWidth<=567?1:window.innerWidth<992?2:4}var i=jQuery(window),t={vars:{}};jQuery("[data-ajax-browsinghistory]").parent(".product-carousel").flexslider({animation:"slide",controlNav:!1,keyboard:!1,itemWidth:210,itemMargin:2,minItems:n(),maxItems:n()});i.resize(function(){var i=n();t.vars.minItems=i;t.vars.maxItems=i})}function get_browsing_history(){if(!(jQuery(".browsing_historyBlock").find("[data-ajax-browsinghistory]").length<1)){var n=jQuery(".browsing_historyBlock").find("[data-ajax-browsinghistory]");jQuery.ajax({url:"/frontapi.asp",type:"GET",dataType:"text",cache:!1,async:!1,data:{module:"browsinghistory"},success:function(t){var r,u,i;if(t=t.toString(),r=jQuery(".browsing_historyBlock .product-items").html(),jQuery(".browsing_historyBlock .product-items").find(".product-item").remove(),t==null||t==""||t==-1){jQuery(".browsing_historyBlock .product-items").remove();return}u=t.split(",");i=jQuery("body").attr("data-currency");jQuery(u).each(function(t,u){var e=get_product(u,-1),f,o;e.CatalogID!=null&&(f=r,f=f.replaceAll("[catalog_id]",e.CatalogID),f=f.replaceAll("[history_item_name]",e.Name),f=f.replaceAll("[THUMBNAIL]",e.ThumbnailFile),f=f.replaceAll("assets/templates/common-core/images/spacer.gif",e.ThumbnailFile),f=f.replaceAll("[ITEMPRICE]",i+e.Price),e.OnSale=="1"?(f=f.replaceAll("[ITEMSALEPRICE]",i+e.SalePrice),f=f.replaceAll("[onsale_item]","bh-onsale-item"),f=f.replaceAll("[onsale_savings_percentage]",e.OnsaleSavingsPercentage)):(f=f.replaceAll("[onsale_item]",""),f=f.replaceAll("[onsale_savings_percentage]","")),o=jQuery(f),jQuery(o).appendTo(n),jQuery("body").hasClass("not-logged-in")&&e.LoginRequired=="2"&&n[0].getElementsByClassName("price")[0].remove())});init_bh_slider()},error:function(){return}})}}function core_dropdown_cart(){(window._3d_cart==undefined||_3d_cart.oid!=0)&&jQuery(".minicart-details").hasClass("initiated")&&jQuery(".minicart-details").slideUp(0);jQuery(".minicart-close").click(function(n){n.preventDefault();jQuery(".minicart-details").slideUp(500)});jQuery(".floating-cart, .floating-cart a").click(function(n){n.preventDefault();jQuery(".minicart-details").slideDown(500);jQuery(".minicart-details").addClass("initiated");var n=jQuery('<div class="minicart-items-table-row"><div class="minicart-items-name"><\/div><div class="minicart-items-qty"><\/div><div class="minicart-items-price"><\/div><\/div>');jQuery.ajax({url:"/frontapi.asp",dataType:"json",type:"GET",cache:!1,data:{module:"cartajax"},success:function(t){if(t.ItemsInCart!=undefined&&t.ItemsInCart.length>0){var r=0,i=0,u=jQuery("body").data("currency");jQuery("[data-minicart-items] .minicart-items-table-row").remove();jQuery(t.ItemsInCart).each(function(t,u){r+=u.qty;i+=u.price*u.qty;$cartItem=jQuery(n).clone();$cartItem.find(".minicart-items-name").html(u.itemname);$cartItem.find(".minicart-items-qty").text(u.qty);$cartItem.find(".minicart-items-price").text(u.price);$cartItem.appendTo("[data-minicart-items]")});i=i.toFixed(jQuery("body").data("decimal"));jQuery("[data-cart-subtotal]").text(u+i);jQuery("[data-cart-totalitems]").text(r)}},error:function(){return}})})}function isQuickviewEnabled(){return jQuery("body").hasClass("qv-enabled")?!0:!1}function validate_email(n){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n)}function mailing_list(n){var u=jQuery(n).parent(".ajax-mailinglist"),t=jQuery(u).data("callback"),f=jQuery(u).data("callfront"),i,r;if(window[f](n),i=jQuery.trim(jQuery(n).find('input[name="email"]').val()),r=jQuery(n).find('input[name="subscribe"]:checked').val(),!validate_email(i)){window[t](n,2);return}if(jQuery("#gdpr_privacy_enforced").val()=="1"&&r==1){jQuery("#divPolicy").on("hidden.bs.modal",function(){window[t](n,"")});if(!jQuery("#gdpr_privacy_accepted").is(":checked")){jQuery("#divPolicy").modal("show");return}}jQuery.ajax({method:"POST",url:_cart_secure_url+"/mailing_list.asp?ajax=1",data:{email:i,action:r},success:function(i){window[t](n,i)},error:function(){window[t](n,0);return}})}function mailing_list2(){return document.mailing2.email.value==""?(alert("Please enter an email!"),!1):jQuery("#gdpr_privacy_enforced").val()=="1"&&document.mailing2.subscribe.value=="1"?(document.getElementById("policy_blog").value=1,jQuery("#divPolicy").modal({containerCss:{borderWidth:"1px",width:"420px",height:"250px",backgroundColor:"#fff",padding:"12px"}}),!1):!0}function get_product(n,t){var i=!1;return jQuery.ajax({method:"POST",url:"/frontapi.asp",dataType:"json",type:"GET",cache:!1,async:!1,data:{productid:n,categoryid:t,limit:1,module:"products",offset:1},success:function(n){i=n},error:function(){jQuery(".product-item").removeClass("ajaxcart-loading")}}),i}function changeDropImage(n){var t=jQuery(n).find(":selected").data("img"),i=jQuery(n).attr("name");jQuery("#"+i).attr("src",t)}function quickview(n){jQuery("#qv-modal .product-item").css({opacity:0,"min-height":600});jQuery("#qv-modal .qv-loader").show();jQuery("#qv-modal").modal("show");jQuery("#qvOptionsError").slideUp();hasFileOption=!1;jQuery("#qv-modal iframe").attr("src",n);document.getElementById("qvIframe").style.height=0;jQuery("#qv-modal iframe").on("load",function(){jQuery("#qv-modal .qv-loader").fadeOut(100);setTimeout(function(){document.getElementById("qvIframe").style.height=document.getElementById("qvIframe").contentWindow.document.body.scrollHeight+20+"px";jQuery("#qv-modal .product-item").css({opacity:1,"min-height":0})},300)})}function add_to_cart(n,t,i,r,u,f,e,o){var s=new FormData,h,c;for(s.append("item_id",n),s.append("itemid",t),s.append("category_id",i),s.append("std_price",r),s.append("qty-0",u),h=0;h<f.length;h++)s.append(f[h].name,f[h].id);c="?module=addcartajax&ajaxadd=1";jQuery.ajax({url:"/frontapi.asp"+c,dataType:"json",type:"POST",cache:!1,contentType:!1,processData:!1,data:s,success:function(t){if(jQuery(o).removeClass("ajaxcart-loading"),t.AddedToCart==1){if(t.redirecturl.indexOf("view_cart.asp")>=0||t.redirecturl.indexOf("checkout.asp")>=0){window.location.href=t.redirecturl;return}jQuery("body").hasClass("qc-enabled")&&launch_qcart();var i=jQuery(o).data("addcart-callback");window[i](o,t);core_dropdown_cart()}else window.location.href=t.errorurl!=undefined?"/product.asp?itemid="+n:"/error.asp?error=901"},error:function(){jQuery(o).removeClass("ajaxcart-loading");window.location.href="/error.asp?error=901"}})}function launch_qcart(){if(jQuery("#qcart-modal").length<=0){var n=jQuery('<aside id="qcart-modal" class="qcart qcart-modal modal" tabindex="-1" role="dialog" data-backdrop="true"><\/aside>');jQuery(n).append('<div class="modal-dialog" role="document"><div class="modal-vcenter"><div class="qv-loader"><span class="mailing-btn-load icon-spin2 animate-spin"><\/span><\/div><div class="modal-content"><button type="button" class="qv-close close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button><iframe src="view_cart_quick.asp" id="qcart-Iframe" frameborder="0"><\/iframe><\/div><\/div><\/div>');jQuery(n).appendTo("body");jQuery("#qcart-modal .modal-content").css({opacity:0,"min-height":600});jQuery("#qcart-modal .qv-loader").show();jQuery("#qcart-modal").modal("show");jQuery("#qcart-modal iframe").on("load",function(){jQuery("#qcart-modal .qv-loader").fadeOut(100);setTimeout(function(){document.getElementById("qcart-Iframe").style.height=document.getElementById("qcart-Iframe").contentWindow.document.body.scrollHeight+"px";jQuery("#qcart-modal .modal-content").css({opacity:1,"min-height":0})},300)})}else{jQuery("#qcart-modal .modal-content").css({opacity:0,"min-height":600});jQuery("#qcart-modal .qv-loader").show();jQuery("#qcart-modal").modal("show");document.getElementById("qcart-Iframe").src=document.getElementById("qcart-Iframe").src;jQuery("#qcart-modal iframe").on("load",function(){jQuery("#qcart-modal .qv-loader").fadeOut(100);document.getElementById("qvIframe").style.height=0;setTimeout(function(){document.getElementById("qcart-Iframe").style.height=document.getElementById("qcart-Iframe").contentWindow.document.body.scrollHeight+"px";jQuery("#qcart-modal .modal-content").css({opacity:1,"min-height":0})},300)})}}function get_qv_options(){var n=[];return jQuery("#qv-modal .options :checked, #qv-modal .options :selected").each(function(){jQuery(this).is("option")?n.push({name:jQuery(this).parent().attr("name"),id:jQuery(this).val()}):n.push({name:jQuery(this).attr("name"),id:jQuery(this).val()})}),n}function closeQuickCartModal(){jQuery("#qcart-modal").modal("hide")}function validateEmail(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)}function setCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function getUrlParam(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function getVariableVal(n){return jQuery("#variablesVals").data(n)}function removeMarkupTags(n){var i=n,t;return i=i.replace(/&(lt|gt);/g,function(n,t){return t=="lt"?"<":">"}),t=i.replace(/<\/?[^>]+(>|$)/g,""),t=t.replace(/\u00a0/g,""),t.replace(/&nbsp;/gi,"")}function GetErrorMessage(n){var t="";return jQuery.ajax({url:n+"&ajax=1&hdnSecurityToken=[securityToken]",type:"POST",dataType:"json",cache:!1,async:!1,success:function(n){t=removeMarkupTags(n.message)},error:function(n){console.log(n);t="Something went wrong. Please try again."}}),t}function GetLanguagItem(n){var t="";return jQuery.ajax({url:"error.asp?msgType=2&itemName="+n,type:"POST",dataType:"json",cache:!1,async:!1,success:function(n){t=n.message},error:function(n){console.log(n);t="Something went wrong. Please try again."}}),t}var _3dThemeType="core";jQuery(function(){jQuery(".ajax-mailinglist form").submit(function(){return mailing_list(this),!1});jQuery(".product-item .quickview").click(function(n){n.preventDefault();var t=jQuery(this).parents(".product-item"),i=jQuery(t).data("catalogid"),r=jQuery(t).data("categoryid");quickview("/product.asp?lt_c=1&itemid="+i+"&qv=1")});jQuery('.product-item[data-ajaxcart="1"] .add-to-cart').click(function(n){var i,u,e;if(n.preventDefault(),jQuery(this).blur(),i=jQuery(this).parents(".product-item"),!jQuery(i).hasClass("ajaxcart-loading")){jQuery(i).addClass("ajaxcart-loading");var r=jQuery(i).data("catalogid"),o=jQuery(i).data("categoryid"),t=get_product(r,o),s=parseInt(t.Stock),f=parseInt(t.InventoryControl),h=parseInt(t.InventoryControlGlobal);s<=0&&(f!=-1?f==3&&(window.location.href="product.asp?itemid="+r):h==3&&(window.location.href="product.asp?itemid="+r));u=!1;t.OptionSetList&&(e=JSON.parse(t.OptionSetList),e.length>0&&(u=!0));isQuickviewEnabled()&&(u||t.IsOptionRequiredForCategory)?(quickview("/product.asp?lt_c=1&itemid="+r+"&qv=1"),jQuery(i).removeClass("ajaxcart-loading")):!isQuickviewEnabled()&&(u||t.IsOptionRequiredForCategory)?window.location.href=t.ProductLink.indexOf("https://")>=0||t.ProductLink.indexOf("http://")>=0?t.ProductLink:"/"+t.ProductLink:add_to_cart(t.CatalogID,t.SKU,0,t.Price,1,[],!1,i)}});jQuery(window).on("load",function(){typeof lozad!="function"&&(jQuery("div.product-items").each(function(){var n=0;jQuery(".product-item",this).each(function(t,i){var r=jQuery(i).height();r>n&&(n=r)});jQuery(this).attr("data-itemsHeight",n)}),jQuery("div.product-items").each(function(n,t){var i=jQuery(t).attr("data-itemsHeight");i!=undefined&&i+""!=""&&jQuery(t).find(".product-item").height(i)}))});jQuery(".product-item .addtowishlist a").click(function(n){var r,i,t;if(n.preventDefault(),r=jQuery(this).parents(".product-item"),i=jQuery(r).data("catalogid"),jQuery("body").hasClass("not-logged-in")){window.location.href="/myaccount.asp?catalogid="+i;return}if(t=get_product(i),console.log(t),JSON.parse(t.OptionSetList).length>0){window.location.href=t.ProductLink;return}jQuery("#globalwishlist-modal .main-image img").attr("src",t.MainImageFile);jQuery("#globalwishlist-modal .modal-heading").text(t.Name);jQuery("#globalwishlist-modal").attr("data-catalogid",i);jQuery("#globalwishlist-modal").modal("show")});jQuery("#globalwishlist-add").click(function(){var r=jQuery("#globalwishlist-modal").data("catalogid"),t=jQuery("#globalwishlist-drpLists").val(),n,i;if((t==null||t=="")&&jQuery('[name="globalwishlist-optListType"]:checked').val()=="1"){alert("Please select a wish list to continue!");return}n=get_product(r);i=n.Price;n.OnSale=="1"&&(i=n.SalePrice);jQuery('[name="globalwishlist-optListType"]:checked').val()=="2"&&(t="0|||"+jQuery("#globalwishlist-txtNewList").val());jQuery.ajax({url:"/frontapi.asp",type:"GET",dataType:"text",cache:!1,async:!1,data:{module:"addtowishlist",list_id:t,catalogid:r,product_id:n.SKU,price:i,stock:n.Stock,name:n.Name},success:function(n){n=parseInt(n.toString());n>0&&(window.location.href="/view_wishlist.asp?k="+n)},error:function(){return}})});core_dropdown_cart()});jQuery(function(){(window.location.search.indexOf("quickcart")!=-1||window.location.search.indexOf("quick")!=-1)&&launch_qcart()});window.closeRewardWidgetModal=function(){jQuery("#divRewardWidgetModal").modal("hide")};window.closeParentModal=function(){jQuery(".modal").modal("hide")};String.prototype.replaceAll=function(n,t){var i=this;return i.split(n).join(t)}