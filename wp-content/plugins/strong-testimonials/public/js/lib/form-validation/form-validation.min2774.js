var strongValidation={defaults:{ajaxUrl:"",display:{successMessage:!1},scroll:{onError:!0,onErrorOffset:100,onSuccess:!0,onSuccessOffset:100},fields:{}},settings:{},setOpts:function(e){this.settings=jQuery.extend({},this.defaults,e)},rules:{},setRules:function(){for(var e=0;e<this.settings.fields.length;e++)"rating"===this.settings.fields[e].type&&1===this.settings.fields[e].required&&(this.rules[this.settings.fields[e].name]={ratingRequired:!0})},init:function(){var e={};void 0!==window.strongForm&&(e=window.strongForm),this.setOpts(e),this.settings.display.successMessage?this.scrollOnSuccess():(this.setRules(),this.changeEvents(),this.customValidators(),this.validateForm())},changeEvents:function(){jQuery('input[type="text"], input[type="url"], input[type="email"], textarea',"#wpmtst-submission-form").on("change blur",function(e){e.target.value=e.target.value.trim()}),jQuery("input[type=url]").change(function(){this.value.length&&!/^https*:\/\//.test(this.value)&&(this.value="https://"+this.value)});for(var e=document.getElementsByClassName("strong-rating"),s=0;s<e.length;s++)e[s].addEventListener("click",this.handleRadioEvent,!0),e[s].addEventListener("keyup",this.handleRadioEvent,!0),e[s].addEventListener("change",function(){jQuery(this).valid()},!0)},handleRadioEvent:function(e){if(48<=e.keyCode&&e.keyCode<=53){var s=e.keyCode-48;jQuery(this).find('input[type="radio"][value='+s+"]").click()}},customValidators:function(){jQuery.validator.addMethod("ratingRequired",function(e,s){return 0<jQuery(s).find("input:checked").val()},jQuery.validator.messages.required)},validateForm:function(){jQuery("#wpmtst-submission-form").validate({onfocusout:!1,focusInvalid:!1,invalidHandler:function(e,s){if(s.numberOfInvalids())if(strongValidation.settings.scroll.onError){if(void 0!==s.errorList[0]){var t=jQuery(s.errorList[0].element),i=t.closest(".form-field").offset().top-strongValidation.settings.scroll.onErrorOffset;jQuery("html, body").animate({scrollTop:i},800,function(){t.focus()})}}else s.errorList[0].element.focus()},submitHandler:function(e){if(strongValidation.disableForm(),""!==strongValidation.settings.ajaxUrl){window.onbeforeunload=function(){return"Please wait while the form is submitted."};var s={url:strongValidation.settings.ajaxUrl,data:{action:"wpmtst_form2"},success:strongValidation.showResponse};jQuery(e).ajaxSubmit(s)}else e.submit()},rules:strongValidation.rules,errorPlacement:function(e,s){e.appendTo(s.closest("div.form-field"))},highlight:function(e,s,t){"checkbox"===e.type?jQuery(e).closest(".field-wrap").addClass(s).removeClass(t):"rating"===jQuery(e).data("fieldType")?jQuery(e).closest(".field-wrap").addClass(s).removeClass(t):jQuery(e).addClass(s).removeClass(t)},unhighlight:function(e,s,t){"checkbox"===e.type?jQuery(e).closest(".field-wrap").removeClass(s).addClass(t):"rating"===jQuery(e).data("fieldType")?jQuery(e).closest(".field-wrap").removeClass(s).addClass(t):jQuery(e).removeClass(s).addClass(t)}})},showResponse:function(e){window.onbeforeunload=null,strongValidation.enableForm();var s=JSON.parse(e);if(s.success)jQuery("#wpmtst-form").html(s.message),strongValidation.scrollOnSuccess();else for(var t in s.errors)s.errors.hasOwnProperty(t)&&jQuery("#wpmtst-submission-form").children(".field-"+t).find("span.error").remove().end().append('<span class="error">'+s.errors[t]+"</span>")},scrollOnSuccess:function(){var e,s;strongValidation.settings.scroll.onSuccess&&(e=jQuery(".testimonial-success").offset())&&(s=e.top-strongValidation.settings.scroll.onSuccessOffset,jQuery("#wpadminbar").length&&(s-=32),jQuery("html, body").animate({scrollTop:s},800))},disableForm:function(){jQuery(".strong-form-wait").show(),jQuery("#wpmtst_submit_testimonial").prop("disabled",!0)},enableForm:function(){jQuery(".strong-form-wait").hide(),jQuery("#wpmtst_submit_testimonial").prop("disabled",!1)}};